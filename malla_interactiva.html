
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Interactiva Obstetricia UNAB</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f9f9f9;
      padding: 10px;
    }
    .semestre {
      background: white;
      border-radius: 20px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .semestre h2 {
      margin-top: 0;
      text-align: center;
    }
    .asignatura {
      padding: 8px 10px;
      margin: 5px 0;
      border-radius: 10px;
      background-color: #ccc;
      cursor: pointer;
    }
    .aprobada {
      background-color: #b19cd9;
      color: white;
    }
    .disponible {
      background-color: #ffc0cb;
      color: black;
    }
    .bloqueada {
      background-color: #ddd;
      color: #888;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <h1 style="text-align:center;">Malla Interactiva - Obstetricia UNAB</h1>

  <div id="malla"></div>

  <script>
    const malla = {
      1: [
        { nombre: "Química General", codigo: "QG", requisitos: [] },
        { nombre: "Biología Celular", codigo: "BC", requisitos: [] },
        { nombre: "Introducción a la Matronería", codigo: "IM", requisitos: [] },
        { nombre: "Habilidades Comunicativas", codigo: "HC", requisitos: [] },
        { nombre: "Inglés I", codigo: "IN1", requisitos: [] },
      ],
      2: [
        { nombre: "Anatomía y Fisiología I", codigo: "AF1", requisitos: ["QG", "BC"] },
        { nombre: "Procesos de Salud-Enfermedad I", codigo: "PSE1", requisitos: [] },
        { nombre: "Psicología del Ciclo Vital", codigo: "PCV", requisitos: [] },
        { nombre: "Educación para la Salud", codigo: "ES", requisitos: [] },
        { nombre: "Inglés II", codigo: "IN2", requisitos: ["IN1"] },
      ],
      3: [
        { nombre: "Anatomía y Fisiología II", codigo: "AF2", requisitos: ["AF1"] },
        { nombre: "Microbiología y Parasitología", codigo: "MP", requisitos: ["QG", "BC"] },
        { nombre: "Salud Pública", codigo: "SP", requisitos: [] },
        { nombre: "Cuidados de Enfermería I", codigo: "CE1", requisitos: ["PSE1"] },
        { nombre: "Inglés III", codigo: "IN3", requisitos: ["IN2"] },
      ],
      4: [
        { nombre: "Farmacología General", codigo: "FG", requisitos: ["AF2", "MP"] },
        { nombre: "Embriología y Genética", codigo: "EG", requisitos: ["AF2"] },
        { nombre: "Cuidados Médico-Quirúrgicos I", codigo: "CMQ1", requisitos: ["CE1"] },
        { nombre: "Política en Salud Sexual y Reproductiva", codigo: "PSSR", requisitos: ["SP"] },
      ],
      5: [
        { nombre: "Ginecología", codigo: "GIN", requisitos: ["CMQ1", "PSSR"] },
        { nombre: "Obstetricia I", codigo: "OB1", requisitos: ["EG", "CMQ1"] },
        { nombre: "Salud Mental", codigo: "SM", requisitos: ["PCV"] },
        { nombre: "Cuidados Neonatales", codigo: "CN", requisitos: ["EG"] },
      ],
      6: [
        { nombre: "Obstetricia II", codigo: "OB2", requisitos: ["OB1"] },
        { nombre: "Pediatría", codigo: "PED", requisitos: ["CN"] },
        { nombre: "Epidemiología", codigo: "EPI", requisitos: ["SP"] },
        { nombre: "Salud Sexual y Reproductiva", codigo: "SSR", requisitos: ["PSSR"] },
      ],
      7: [
        { nombre: "Práctica Clínica I", codigo: "PCI", requisitos: ["OB2", "GIN"] },
        { nombre: "Investigación en Salud", codigo: "INV", requisitos: ["EPI"] },
        { nombre: "Gestión en Salud", codigo: "GES", requisitos: [] },
      ],
      8: [
        { nombre: "Internado Obstétrico", codigo: "IO", requisitos: ["PCI"] },
        { nombre: "Internado Neonatal", codigo: "IN", requisitos: ["CN", "PED"] },
      ],
      9: [
        { nombre: "Internado en Atención Primaria", codigo: "IAP", requisitos: ["IO", "IN"] },
        { nombre: "Trabajo de Título", codigo: "TT", requisitos: ["INV"] },
      ]
    };

    const estado = {}; // guarda qué ramos están aprobados

    function puedeTomar(asignatura) {
      return asignatura.requisitos.every(req => estado[req]);
    }

    function renderMalla() {
      const container = document.getElementById("malla");
      container.innerHTML = "";

      for (let s = 1; s <= 9; s++) {
        const semestre = document.createElement("div");
        semestre.className = "semestre";
        const titulo = document.createElement("h2");
        titulo.textContent = `Semestre ${s}`;
        semestre.appendChild(titulo);

        malla[s].forEach(asig => {
          const div = document.createElement("div");
          div.className = "asignatura";

          if (estado[asig.codigo]) {
            div.classList.add("aprobada");
          } else if (puedeTomar(asig)) {
            div.classList.add("disponible");
          } else {
            div.classList.add("bloqueada");
          }

          div.textContent = asig.nombre;
          div.onclick = () => {
            if (!puedeTomar(asig)) return;
            estado[asig.codigo] = true;
            renderMalla();
          };
          semestre.appendChild(div);
        });

        container.appendChild(semestre);
      }
    }

    renderMalla();
  </script>
</body>
</html>
